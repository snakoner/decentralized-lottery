{"ast":null,"code":"var _jsxFileName = \"/home/vb/playground/decentralized-lottery-main/decentralized-lottery-main/frontend/src/Lottery.tsx\",\n  _s = $RefreshSig$();\n//Lottery.tsx\nimport React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport './index.css';\nimport WinnersList from \"./WinnersList.tsx\";\nimport ParticipantsList from \"./ParticipantsList.tsx\";\n\n// import { bigint } from \"hardhat/internal/core/params/argumentTypes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ALCHEMY_RPC_URL = \"https://eth-sepolia.g.alchemy.com/v2/QtPw5bLONCtW00agVEhE66pb1Vsv9RnC\";\nconst CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS;\nconsole.log(\"RPC URL:\", ALCHEMY_RPC_URL);\nconsole.log(\"Contract Address:\", CONTRACT_ADDRESS);\nconst Modal = ({\n  isOpen,\n  onClose\n}) => {\n  if (!isOpen) return null; // –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º, –µ—Å–ª–∏ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã—Ç–æ\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0448\\u0435\\u043B\\u0435\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        children: \"  \\u274C  \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 9\n  }, this);\n};\n_c = Modal;\nconst Spinner = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"spinner\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\n_c2 = Spinner;\nconst LotteryStatus = ({\n  connected,\n  account\n}) => {\n  _s();\n  const [ticketPriceWei, setTicketPriceWei] = useState(0);\n  const [ticketPrice, setTicketPrice] = useState(\"\");\n  const [participants, setParticipants] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(0);\n  const [ticketNum, setTicketNum] = useState(0);\n  const [unlockedBalance, setUnlockedBalance] = useState(0);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const openModal = () => setIsModalOpen(true);\n  const closeModal = () => setIsModalOpen(false);\n  const contractABI = [\"function getTimeLeft() external view returns (uint)\", \"function getParticipantsNum() external view returns (uint)\", \"function getUnlockedBalance(address account) external view returns (uint)\", \"function getTicketNum(address account) external view returns (uint)\", \"function ticketPrice() public view returns (uint)\", \"function round() public view returns (uint)\", \"function bid(uint amount) external payable\", \"function withdraw(address payable _to) external\"];\n  const browserProvider = new ethers.BrowserProvider(window.ethereum);\n  const providerRpc = new ethers.JsonRpcProvider(ALCHEMY_RPC_URL);\n  const contractRpc = new ethers.Contract(CONTRACT_ADDRESS, contractABI, providerRpc);\n  const formatTime = seconds => {\n    const hrs = Math.floor(seconds / 3600);\n    const mins = Math.floor(seconds % 3600 / 60);\n    const secs = seconds % 60;\n    return `${hrs.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n  };\n\n  // const checkProviderConnection = async() => {\n  //     const blockNumber = await providerRpc.getBlockNumber();\n  //     console.log(\"current block: \", blockNumber);\n  // }\n\n  // contract get state\n  const getParticipantsNumber = async () => {\n    const num = await contractRpc.getTimeLeft();\n    setTimeLeft(Number(num));\n  };\n  const getParticipantsNum = async () => {\n    const num = await contractRpc.getParticipantsNum();\n    setParticipants(Number(num));\n  };\n  const getTicketPrice = async () => {\n    const num = await contractRpc.ticketPrice();\n    setTicketPriceWei(num);\n    setTicketPrice(ethers.formatEther(num) + \" ETH\");\n  };\n\n  // const getRound = async() => {\n  //     const num: bigint = await contractRpc.round();\n  //     return num;\n  // }\n\n  const getTicketsByUser = async () => {\n    // let _account;\n    // _account = await getAccount();\n\n    if (account !== null) {\n      const num = await contractRpc.getTicketNum(account);\n      setTicketNum(Number(num));\n    }\n  };\n  const getBalanceToWithdraw = async () => {\n    if (account !== null) {\n      const num = await contractRpc.getUnlockedBalance(account);\n      setUnlockedBalance(ethers.formatUnits(num));\n    }\n  };\n\n  // const postBuyTicket = async(fromAddress: string, ticketNum: number) => {\n  //     try {\n  //         console.log(JSON.stringify({\n  //             fromAddress: fromAddress,\n  //             ticketNum: ticketNum,\n  //         }));\n  //         const response = await fetch(\"http://0.0.0.0:8000/bid\", {\n  //             method: 'POST',\n  //             headers: {\n  //                 'Content-Type': 'application/json',\n  //             },     \n  //             body: JSON.stringify({\n  //                 fromAddress: fromAddress,\n  //                 ticketNum: ticketNum,\n  //             }),\n  //         });\n\n  //         // const data = await response.json();\n  //         console.log('transaction sent');\n  //     } catch(error) {\n  //         console.log(error);\n  //     }\n  // };\n\n  const withdraw = async () => {\n    if (!connected) {\n      openModal();\n      return;\n    }\n    if (Number(unlockedBalance) === 0) {\n      console.log(\"zero balance to withdraw\");\n      return;\n    }\n    const signer = await browserProvider.getSigner();\n    const contract = new ethers.Contract(CONTRACT_ADDRESS, contractABI, signer);\n    try {\n      const tx = await contract.withdraw(account);\n      await tx.wait();\n      getBalanceToWithdraw();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const buyTicket = async () => {\n    if (!connected) {\n      openModal();\n      return;\n    }\n    const input = document.getElementById(\"input-lottery\");\n    let ticketNumber = 0;\n    if (input) {\n      const inputValue = input.value;\n      if (inputValue === \"\") {\n        ticketNumber = 1;\n      } else {\n        ticketNumber = Number(inputValue);\n      }\n    }\n    const txParams = {\n      value: ticketPriceWei * ethers.toBigInt(ticketNumber)\n    };\n    console.log(txParams);\n    // postBuyTicket(account, ticketNumber);\n    const signer = await browserProvider.getSigner();\n    const contract = new ethers.Contract(CONTRACT_ADDRESS, contractABI, signer);\n    try {\n      setLoading(true);\n      const tx = await contract.bid(ethers.toBigInt(ticketNumber), txParams);\n      await tx.wait();\n      const txResult = document.getElementById('tx-result');\n      if (txResult) {\n        txResult.innerHTML = '‚úÖ Tx completed';\n      }\n      getTicketsByUser();\n    } catch (error) {\n      console.log(error);\n    }\n    setLoading(false);\n  };\n\n  // internal\n  useEffect(() => {\n    console.log(\"lotteryStatus() = \", connected);\n\n    // contract interaction\n    setLoading(false);\n    getParticipantsNumber();\n    getParticipantsNum();\n    getTicketPrice();\n    getTicketsByUser();\n    getBalanceToWithdraw();\n\n    // const timerSpinner = setTimeout(() => {}, 3000); // 3 —Å–µ–∫—É–Ω–¥—ã    \n\n    const timer = setInterval(() => {\n      setTimeLeft(prevTime => prevTime > 0 ? prevTime - 1 : 0);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [account]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lottery-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"lottery-title\",\n        children: \"Lottery Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lottery-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83C\\uDF9F\\uFE0F \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Ticket Price:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 28\n          }, this), \" \", ticketPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83D\\uDC65 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Participants:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 27\n          }, this), \" \", participants]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u23F3 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Time Left:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 26\n          }, this), \" \", formatTime(timeLeft)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u23F3 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Your tickets:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 26\n          }, this), \" \", ticketNum]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"input-lottery\",\n        className: \"lottery-input\",\n        placeholder: \"1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"lottery-button\",\n        onClick: buyTicket,\n        children: \"Buy Ticket\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: isModalOpen,\n        onClose: closeModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 32\n        }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n          id: \"tx-result\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 46\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lottery-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"lottery-title\",\n        children: \"Withdraw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lottery-info\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u23F3 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Available value:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 26\n          }, this), \" \", unlockedBalance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"lottery-button\",\n        onClick: withdraw,\n        children: \"Withdraw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ParticipantsList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(WinnersList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 9\n  }, this);\n};\n_s(LotteryStatus, \"kEjiaoup/Y8AIlKuRYnfKnxbzoA=\");\n_c3 = LotteryStatus;\nexport default LotteryStatus;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Modal\");\n$RefreshReg$(_c2, \"Spinner\");\n$RefreshReg$(_c3, \"LotteryStatus\");","map":{"version":3,"names":["React","useState","useEffect","ethers","WinnersList","ParticipantsList","jsxDEV","_jsxDEV","ALCHEMY_RPC_URL","CONTRACT_ADDRESS","process","env","REACT_APP_CONTRACT_ADDRESS","console","log","Modal","isOpen","onClose","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","Spinner","_c2","LotteryStatus","connected","account","_s","ticketPriceWei","setTicketPriceWei","ticketPrice","setTicketPrice","participants","setParticipants","timeLeft","setTimeLeft","ticketNum","setTicketNum","unlockedBalance","setUnlockedBalance","isModalOpen","setIsModalOpen","loading","setLoading","openModal","closeModal","contractABI","browserProvider","BrowserProvider","window","ethereum","providerRpc","JsonRpcProvider","contractRpc","Contract","formatTime","seconds","hrs","Math","floor","mins","secs","toString","padStart","getParticipantsNumber","num","getTimeLeft","Number","getParticipantsNum","getTicketPrice","formatEther","getTicketsByUser","getTicketNum","getBalanceToWithdraw","getUnlockedBalance","formatUnits","withdraw","signer","getSigner","contract","tx","wait","error","buyTicket","input","document","getElementById","ticketNumber","inputValue","value","txParams","toBigInt","bid","txResult","innerHTML","timer","setInterval","prevTime","clearInterval","id","placeholder","_c3","$RefreshReg$"],"sources":["/home/vb/playground/decentralized-lottery-main/decentralized-lottery-main/frontend/src/Lottery.tsx"],"sourcesContent":["//Lottery.tsx\nimport React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport './index.css';\nimport WinnersList from \"./WinnersList.tsx\";\nimport ParticipantsList from \"./ParticipantsList.tsx\";\n\n// import { bigint } from \"hardhat/internal/core/params/argumentTypes\";\n\nconst ALCHEMY_RPC_URL = \"https://eth-sepolia.g.alchemy.com/v2/QtPw5bLONCtW00agVEhE66pb1Vsv9RnC\";\nconst CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS;\n\nconsole.log(\"RPC URL:\", ALCHEMY_RPC_URL);\nconsole.log(\"Contract Address:\", CONTRACT_ADDRESS);\n\nconst Modal = ({ isOpen, onClose }) => {\n    if (!isOpen) return null; // –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º, –µ—Å–ª–∏ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã—Ç–æ\n    return (\n        <div className=\"modal-overlay\">\n            <div className=\"modal-content\">\n                {/* <h2>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫</h2> */}\n                <p>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫</p>\n                <button onClick={onClose}>  ‚ùå  </button>\n            </div>\n        </div>\n    );\n};\n\nconst Spinner = () => {\n    return (\n        <div className=\"spinner\"></div>\n    );\n};\n\ninterface LotteryProps {\n    connected: boolean;\n    account: string;\n}\n\nconst LotteryStatus: React.FC<LotteryProps> = ({connected, account}) => {\n    const [ticketPriceWei, setTicketPriceWei] = useState<bigint>(0);\n    const [ticketPrice, setTicketPrice] = useState<string>(\"\"); \n    const [participants, setParticipants] = useState<number>(0);\n    const [timeLeft, setTimeLeft] = useState<number>(0);\n    const [ticketNum, setTicketNum] = useState<number>(0);\n    const [unlockedBalance, setUnlockedBalance] = useState<bigint>(0);\n    const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\n    const [loading, setLoading] = useState<boolean>(true);\n\n    const openModal = () => setIsModalOpen(true);\n    const closeModal = () => setIsModalOpen(false);\n\n    const contractABI = [\n        \"function getTimeLeft() external view returns (uint)\",\n        \"function getParticipantsNum() external view returns (uint)\",\n        \"function getUnlockedBalance(address account) external view returns (uint)\",\n        \"function getTicketNum(address account) external view returns (uint)\",\n        \"function ticketPrice() public view returns (uint)\",\n        \"function round() public view returns (uint)\",        \n        \"function bid(uint amount) external payable\",\n        \"function withdraw(address payable _to) external\",\n    ];\n\n    const browserProvider = new ethers.BrowserProvider(window.ethereum);\n    const providerRpc = new ethers.JsonRpcProvider(ALCHEMY_RPC_URL);\n    const contractRpc = new ethers.Contract(CONTRACT_ADDRESS, contractABI, providerRpc);\n\n    const formatTime = (seconds: number) => {\n        const hrs = Math.floor(seconds / 3600);\n        const mins = Math.floor((seconds % 3600) / 60);\n        const secs = seconds % 60;\n        return `${hrs.toString().padStart(2, \"0\")}:${mins\n            .toString()\n            .padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n    };\n\n    // const checkProviderConnection = async() => {\n    //     const blockNumber = await providerRpc.getBlockNumber();\n    //     console.log(\"current block: \", blockNumber);\n    // }\n\n    // contract get state\n    const getParticipantsNumber = async() => {\n        const num: bigint = await contractRpc.getTimeLeft();        \n        setTimeLeft(Number(num));\n    }\n\n    const getParticipantsNum = async() => {\n        const num: bigint = await contractRpc.getParticipantsNum();\n        setParticipants(Number(num));\n    }\n\n    const getTicketPrice = async() => {\n        const num: bigint = await contractRpc.ticketPrice();\n        setTicketPriceWei(num);\n        setTicketPrice(ethers.formatEther(num) + \" ETH\");\n    }\n\n    // const getRound = async() => {\n    //     const num: bigint = await contractRpc.round();\n    //     return num;\n    // }\n\n    const getTicketsByUser = async() => {\n        // let _account;\n        // _account = await getAccount();\n        \n        if (account !== null) {\n            const num: bigint = await contractRpc.getTicketNum(account);\n            setTicketNum(Number(num));\n        }\n    }\n\n    const getBalanceToWithdraw = async() => {\n        if (account !== null) {\n            const num: bigint = await contractRpc.getUnlockedBalance(account);\n            setUnlockedBalance(ethers.formatUnits(num));\n        }\n    }\n\n    // const postBuyTicket = async(fromAddress: string, ticketNum: number) => {\n    //     try {\n    //         console.log(JSON.stringify({\n    //             fromAddress: fromAddress,\n    //             ticketNum: ticketNum,\n    //         }));\n    //         const response = await fetch(\"http://0.0.0.0:8000/bid\", {\n    //             method: 'POST',\n    //             headers: {\n    //                 'Content-Type': 'application/json',\n    //             },     \n    //             body: JSON.stringify({\n    //                 fromAddress: fromAddress,\n    //                 ticketNum: ticketNum,\n    //             }),\n    //         });\n            \n    //         // const data = await response.json();\n    //         console.log('transaction sent');\n    //     } catch(error) {\n    //         console.log(error);\n    //     }\n    // };\n\n    const withdraw = async() => {\n        if (!connected) {\n            openModal();\n            return;\n        }\n\n        if (Number(unlockedBalance) === 0) {\n            console.log(\"zero balance to withdraw\");\n            return;\n        }\n\n        const signer = await browserProvider.getSigner();\n        const contract = new ethers.Contract(CONTRACT_ADDRESS, contractABI, signer);\n        \n        try {\n            const tx = await contract.withdraw(account);\n            await tx.wait();\n            getBalanceToWithdraw();\n        } catch(error) {\n            console.log(error);\n        }\n    }\n\n    const buyTicket = async() => {\n        if (!connected) {\n            openModal();\n            return;\n        }\n\n        const input = document.getElementById(\"input-lottery\");\n        let ticketNumber: number = 0;\n        if (input) {\n            const inputValue = input.value;\n            if (inputValue === \"\") {\n                ticketNumber = 1;\n            } else {\n                ticketNumber = Number(inputValue);\n            }\n        }\n\n        const txParams = {\n            value: ticketPriceWei * ethers.toBigInt(ticketNumber),\n        };\n\n        console.log(txParams);\n        // postBuyTicket(account, ticketNumber);\n        const signer = await browserProvider.getSigner();\n        const contract = new ethers.Contract(CONTRACT_ADDRESS, contractABI, signer);\n        try {\n            setLoading(true);\n            const tx = await contract.bid(ethers.toBigInt(ticketNumber), txParams);        \n            await tx.wait();\n            const txResult = document.getElementById('tx-result');\n            if (txResult) {\n                txResult.innerHTML = '‚úÖ Tx completed';\n            }\n\n            getTicketsByUser();\n        } catch (error) {\n            console.log(error);\n        }    \n\n        setLoading(false);\n    }\n\n    // internal\n    useEffect(() => {\n        console.log(\"lotteryStatus() = \", connected);\n\n        // contract interaction\n        setLoading(false);\n        getParticipantsNumber();\n        getParticipantsNum();\n        getTicketPrice();\n        getTicketsByUser();\n        getBalanceToWithdraw();\n\n        // const timerSpinner = setTimeout(() => {}, 3000); // 3 —Å–µ–∫—É–Ω–¥—ã    \n\n        const timer = setInterval(() => {\n            setTimeLeft((prevTime) => (prevTime > 0 ? prevTime - 1 : 0));\n        }, 1000);\n        return () => clearInterval(timer);\n    }, [account]);\n\n    return (\n        <div className=\"main-container\">\n            <div className=\"lottery-container\">\n                <h1 className=\"lottery-title\">Lottery Status</h1>\n                <div className=\"lottery-info\">\n                    <p>üéüÔ∏è <strong>Ticket Price:</strong> {ticketPrice}</p>\n                    <p>üë• <strong>Participants:</strong> {participants}</p>\n                    <p>‚è≥ <strong>Time Left:</strong> {formatTime(timeLeft)}</p>\n                    <p>‚è≥ <strong>Your tickets:</strong> {ticketNum}</p>\n                </div>\n                <input id=\"input-lottery\" className=\"lottery-input\" placeholder=\"1\"></input>\n                <button className=\"lottery-button\" onClick={buyTicket}>\n                    Buy Ticket\n                </button>\n                <Modal isOpen={isModalOpen} onClose={closeModal} />\n                <div>\n                    {loading ? <Spinner /> : <h1 id=\"tx-result\"></h1>}\n                </div>\n            </div>\n\n            <div className=\"lottery-container\">\n                <h1 className=\"lottery-title\">Withdraw</h1>\n                <div className=\"lottery-info\">\n                    <p>‚è≥ <strong>Available value:</strong> {unlockedBalance}</p>\n                </div>\n                <button className=\"lottery-button\" onClick={withdraw}>\n                    Withdraw\n                </button>\n            </div>\n            {/* Add the new lists */}\n            <ParticipantsList />\n            <WinnersList />\n        </div>        \n    );\n};\n\nexport default LotteryStatus;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}